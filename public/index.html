<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <title>Accueil</title>
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>
        <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>
        <script src="js/three.min.js"></script>
        <script src="js/GLTFLoader.js"></script>
        <script src="js/OrbitControls.js"></script>
        <script src="js/RoomEnvironment.js"></script>
        <script>

            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xdddddd);

            hlight = new THREE.AmbientLight(0x404040, 105);
            scene.add(hlight);
            directionalLight = new THREE.DirectionalLight(0xffffff, 100);
            directionalLight.position.set(0, 1, 0);
            directionalLight.castShadow = true;
            scene.add(directionalLight);
            light = new THREE.PointLight(0xffffff, 10);
            light.position.set(0, 300, 500);
            scene.add(light);
            const materialGlass = new THREE.MeshPhongMaterial({
                opacity: 0.5,
                transparent: true,
            });
            camera = new THREE.PerspectiveCamera(40,window.innerWidth/window.innerHeight,1,5000);
            camera.position.x = 0;
            camera.position.y = 350;
            camera.position.z = 750;

            let loader = new THREE.GLTFLoader();
            loader.load('/resources/3d/socle.gltf', function(gltf){
                for (let i = 12; i < 17; i++) {
                    const glass = gltf.scene.children[i];
                    glass.material.opacity = 0.1;
                }
                scene.scale.set(0.1,0.1,0.1);

                scene.add(gltf.scene);
                render();
            });

            renderer = new THREE.WebGLRenderer({antialias:true});
            renderer.setSize(window.innerWidth,window.innerHeight);
            document.body.appendChild(renderer.domElement);
            
            const controls = new THREE.OrbitControls( camera, renderer.domElement );
				controls.addEventListener( 'change', render ); // use if there is no animation loop
				controls.minDistance = 2;
				controls.maxDistance = 10;
				controls.target.set( 0, 0, - 0.2 );
				controls.update();
            
            function render() {

				renderer.render( scene, camera );

			}
        </script>
    </body>
</html>